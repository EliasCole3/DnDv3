{"version":3,"sources":["js-es6.js"],"names":[],"mappings":"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","file":"js.js","sourcesContent":["$(() => {\n  ebot.insertModalHtml(\"modal-lg\")\n  abc.initialize()\n  // ebot.updateDocumentation(abc)\n})\n\n\n\nlet abc = {\n  \n  initialize: () => {\n    abc.socket = io()\n    abc.handlersSocketEventReceived()\n    abc.makeRightDrawer()\n\n    // this is a try block because the data doesn't always parse right, if the page is refreshed\n    // instead of newly navigated to.\n    try {\n      let user = JSON.parse($(\"#data-for-you\").html())\n      console.log(user)\n\n      abc.setCurrentPlayerCharacterId(user)\n\n      let DMs = [\"a\", \"bliss\", \"dash\"]\n      let players = [\"a\", \"b\", \"c\", \"bliss\", \"laurana\", \"andros\", \"skjor\", \"greg\", \"ares\", \"wild\"]\n      \n      if(DMs.indexOf(user.local.username) > -1) {\n        abc.userIsDM = true\n      }\n\n      if(players.indexOf(user.local.username) > -1) {\n        abc.userIsPlayer = true\n      }\n\n      if(!abc.userIsDM && !abc.userIsPlayer) {\n        alert(\"Unauthorized user detected. Self destruct sequence initiated.\")\n      }\n\n      $.when.apply($, abc.retrieveInitialModels()).done(() => {\n        // abc.fillTopDrawer()\n        abc.fillRightDrawer()\n        // abc.fillLeftDrawer()\n        // abc.fillBottomDrawer()\n      })\n\n      abc.addPlayerCursorDivs()\n\n      abc.handlerMouseMove()\n\n    } catch(e) {\n      console.log(`error parsing authentication data: ${e}`)\n    }\n\n\t  \n  },\n\n\n  addPlayerCursorDivs: () => {\n    //currently hardcoded in index.ejs\n  },\n\n  handlerMouseMove: () => {\n    $('body').on('mousemove', e => {\n      if(abc.cursorsVisible) {\n        abc.socket.emit('cursor moved', {playerId: abc.currentPlayerCharacterId, x: e.pageX, y: e.pageY})\n      }\n    })\n  },\n\n  updateCursorImage: emitObj => {\n    console.log(emitObj)\n    if(abc.cursorDelay === 10) {\n      $(`#cursor-${emitObj.playerId}`).css(`top`, emitObj.y).css(`left`, emitObj.x)\n      abc.cursorDelay = 0\n    } else {\n      abc.cursorDelay++\n    }\n    \n  },\n\n  setCurrentPlayerCharacterId: user => {\n\n    switch(user.local.username) {\n      case \"laurana\":\n        abc.currentPlayerCharacterId = 1\n        abc.currentPlayerName = 'ryland'\n        break\n      case \"andros\":\n        abc.currentPlayerCharacterId = 2\n        abc.currentPlayerName = 'dave'\n        break\n      case \"skjor\":\n        abc.currentPlayerCharacterId = 3\n        abc.currentPlayerName = 'josh'\n        break\n      case \"greg\":\n        abc.currentPlayerCharacterId = 4\n        abc.currentPlayerName = 'nick'\n        break\n      case \"ares\":\n        abc.currentPlayerCharacterId = 5\n        abc.currentPlayerName = 'izzy'\n        break\n      case \"wild\":\n        abc.currentPlayerCharacterId = 8\n        abc.currentPlayerName = 'jon'\n        break\n      case \"bliss\":\n        abc.currentPlayerCharacterId = 0\n        abc.currentPlayerName = 'elias'\n        break\n      case \"dash\":\n        abc.currentPlayerCharacterId = 99\n        abc.currentPlayerName = 'dave'\n        break\n      default:\n        console.log(`setCurrentPlayerCharacterId() fell out of switch statement. Current user:`)\n        console.log(user)\n    }\n\n  },\n\n\n  handlersSocketEventReceived: () => {\n\n    abc.socket.on('element dragged', emitObj => {\n      $('#' + emitObj.id).css(\"top\", emitObj.y)\n      $('#' + emitObj.id).css(\"left\", emitObj.x)\n    })\n\n    abc.socket.on('element resized', emitObj => {\n      $(`#${emitObj.id}`).css(\"width\", emitObj.width).css(\"height\", emitObj.height)\n    })\n\n    abc.socket.on('user connected', () => {\n      // abc.playSound(\"me-user-connected\")\n    })\n\n    abc.socket.on('user disconnected', () => {\n      // abc.playSound(\"me-user-disconnected\")\n    })\n\n    abc.socket.on('item token added', emitObj => {\n      abc.addTokenItem(emitObj.imageFilename, emitObj.ranTop, emitObj.ranLeft)\n    })\n\n    abc.socket.on('player character token added', emitObj => {\n      abc.addTokenPlayerCharacter(emitObj.imageFilename, emitObj.ranTop, emitObj.ranLeft)\n    })\n\n    abc.socket.on('creature token added', emitObj => {\n      abc.addTokenCreature(emitObj.imageFilename, emitObj.ranTop, emitObj.ranLeft, emitObj.id)\n    })\n\n    abc.socket.on('background changed', emitObj => {\n      abc.changeBackground(emitObj.background)\n    })\n\n    abc.socket.on('hp changed', emitObj => {\n      abc.changeHp(emitObj.id, emitObj.val)\n    })\n\n    abc.socket.on('cursor moved', emitObj => {\n      abc.updateCursorImage(emitObj)\n    })\n\n    abc.socket.on('cursors toggle visibility', emitObj => {\n      abc.toggleCursorsVisibility(emitObj.cursorsVisible)\n      abc.cursorsVisible = emitObj.cursorsVisible\n    })\n\n\n    abc.socket.on('core', obj => {\n      //branching logic based on what is in the object\n\n      // console.log(obj)\n\n      if(obj.event === \"create-turn-counter\") {\n        abc.createTurnCounter()\n      }\n\n      if(obj.event === \"increment-turn\") {\n        let currentTurn = +$(\"#tc-current-turn\").text()\n        $(\"#tc-current-turn\").text(++currentTurn)\n      }\n\n      if(obj.event === \"decrement-turn\") {\n        let currentTurn = +$(\"#tc-current-turn\").text()\n        $(\"#tc-current-turn\").text(--currentTurn)\n      }\n\n      if(obj.event === \"add-row-to-turn-counter\") {\n        abc.addRowToTurnCounter(obj.randId)\n      }\n\n      if(obj.event === \"remove-turn-counter-row\") {\n        $(`tr[id=tc-${obj.randId}]`).remove()\n      }\n\n      if(obj.event === \"update-turn-counter-row-values\") {\n        $(`.td-name[id=tc-name-${obj.randId}]`).html(obj.updatedName)\n        $(`.td-initiative[id=tc-initiative-${obj.randId}]`).html(obj.updatedInitiative)\n        $(`.td-count[id=tc-count-${obj.randId}]`).html(obj.updatedCount)\n      }\n\n      if(obj.event === \"creature-table-remove-row\") {\n        abc.removeToken(obj.tokenId)\n      }\n\n      if(obj.event === \"add-custom-token\") {\n        abc.addCustomToken(obj.imageFilename, obj.ranTop, obj.ranLeft, obj.height, obj.width, obj.opacity) \n      }\n\n      if(obj.event === \"message\") {\n        console.log('message received: ')\n        console.log(obj)\n        if(!obj.message) return\n\n        if(obj.to === 'all') {\n          $('#messages-from-all').append(`<li class='message-li'><b>${obj.from.capitalize()}</b>: ${obj.message}</li>`)\n        }\n\n        if(obj.to === abc.currentPlayerName) {\n          $(`#messages-from-${obj.from}`).append(`<li class='message-li'><b>${obj.from.capitalize()}</b>: ${obj.message}</li>`)\n        }\n\n        if(obj.from === abc.currentPlayerName && obj.to !== 'all') {\n          $(`#messages-from-${obj.to}`).append(`<li class='message-li'><b>Me</b>: ${obj.message}</li>`)\n        }\n      }\n\n      \n\n\n\n    })\n  },\n\n  removeToken: tokenId => {\n    $(`#dynamically-added-div-${tokenId}`).remove()\n  },\n\n  retrieveInitialModels: () => {\n    let deferreds = []\n\n    deferreds.push(ebot.retrieveEntity(abc, \"items\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"powers\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"creatures\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"playerCharacters\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"nonPlayerCharacters\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"joinPlayerCharacterItems\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"joinPlayerCharacterPowers\"))\n    deferreds.push(ebot.retrieveEntity(abc, \"characterDetails\"))\n\n    return deferreds\n  },\n\n\n  toggleCursorsVisibility: cursorsVisible => {\n    if(!cursorsVisible) {\n      $(\".cursor\")\n        .velocity({opacity: 0}, {duration: 1000})\n        .velocity({display: \"none\"}, {duration: 0})\n    } else {\n    $(\".cursor\")\n      .velocity({display: \"block\"}, {duration: 0})\n      .velocity({opacity: .95}, {duration: 1000})\n    }\n  },\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\n  fillRightDrawer: () => {\n    if(abc.userIsDM) {\n      $(`#right-drawer-contents`).html(abc.getRightDrawerHtmlDM())\n      abc.handlerRightDrawerContentsDM()\n    } else if(abc.userIsPlayer) {\n      $(`#right-drawer-contents`).html(abc.getRightDrawerHtmlPlayer())\n      abc.handlerRightDrawerContentsPlayer()\n    } else {\n      $(`#right-drawer-contents`).html(\"Unauthorized user detected!\")\n    }\n  },\n\n\n\n  getRightDrawerHtmlCommon: () => {\n    let htmlString = ``\n\n    htmlString += `\n    <button id='toggle-lines' class='btn btn-md btn-info'>Toggle Lines</button> \n    <br><br>\n\n    <button id='show-all-powers' class='btn btn-md btn-info'>Show All Powers</button>\n    <br><br>\n\n    <button id='show-all-powers-improved' class='btn btn-md btn-info'>Show All Powers+</button>\n    <br><br>\n\n    <button id='helpful-info' class='btn btn-md btn-info'>Helpful Info</button>\n    <br><br>\n\n    <button id='old-character-sheets' class='btn btn-md btn-info'>Old Character Sheets</button>\n    <br><br>\n\n    <button id='messaging' class='btn btn-md btn-info'>Messaging</button>\n    <br><br>\n\n\n    `\n\n    return htmlString\n  },\n\n  getRightDrawerHtmlDM: () => {\n    let htmlString = ``\n    htmlString += abc.getRightDrawerHtmlCommon()\n\n    htmlString += `\n    <select id='background-select' data-placeholder='Choose a background...'>\n      <option value=''></option>\n      <option value='blank'>Blank</option>\n      <option value='zone-map.png'>Zone Map</option>\n      <option value='river.jpg'>River</option>\n      <option value='twooth-library.png'>Twooth Library</option>\n      <option value='slime-cave.png'>Slime Cave</option>\n      <option value='andora-tavern.jpg'>Andora Tavern</option>\n      <option value='andora-gates.png'>Andora Gates</option>\n      <option value='andora.jpg'>Andora</option>\n      <option value='brement.jpg'>Brement</option>\n      <option value='dark-forest-1.jpg'>Dark Forest</option>\n      <option value='desert-1.JPG'>Desert 1</option>\n      <option value='desert-statue.jpg'>Desert Statue</option>\n      <option value='dunkar.jpg'>Dunkar</option>\n      <option value='forest-path-1.jpg'>Forest Path 1</option>\n      <option value='forest-path-2.jpg'>Forest Path 2</option>\n      <option value='forest-1.JPG'>Forest 1</option>\n      <option value='plains-1.jpg'>Plains 1</option>\n      <option value='plains-2.jpg'>Plains 2</option>\n      <option value='spider-den.jpg'>Spider Den</option>\n      <option value='twooth.jpg'>Twooth</option>\n      <option value='ameretis-flashback-1.jpg'>Flashback 1</option>\n    </select>\n    <br><br>\n\n    <button id='toggle-cursor-visibility' class='btn btn-md btn-info'>toggle cursors</button>\n    <br><br>\n\n    <button id='token-window' class='btn btn-md btn-info'>Tokens</button>\n    <br><br>\n\n\n\n\n\n\n\n    `\n\n\n\n\n    return htmlString\n  },\n\n  getRightDrawerHtmlPlayer: () => {\n    let htmlString = ``\n    htmlString += abc.getRightDrawerHtmlCommon()\n\n    htmlString += `\n    <br><br><button id='show-backstory' class='btn btn-md btn-info'>Show My Backstory</button>\n    <br><br><button id='show-my-powers' class='btn btn-md btn-info'>Show My Powers</button>\n    `\n\n\n    return htmlString\n  },\n\n\n\n  handlerRightDrawerContentsCommon: () => {\n\n    $(\"#toggle-lines\").click(e => {\n      if($(\"#lines\").css(\"opacity\") === \"0.3\") {\n        $(\"#lines\").velocity({opacity: \"0\"})\n      } else {\n        $(\"#lines\").velocity({opacity: \"0.3\"})\n      }\n    })\n\n    $(\"#show-all-powers\").click(e => {\n      ebot.showModal(\"All Powers\", abc.viewAllPowers())\n    })\n\n    $(\"#show-all-powers-improved\").click(e => {\n      ebot.showModal(\"All Powers+\", abc.viewAllPowersImproved())\n      abc.handlerAllPowersImproved()\n    })\n\n    $(\"#helpful-info\").click(e => {\n      ebot.showModal(\"Helpful Info\", abc.viewHelpfulInfo())\n    })\n\n    $(\"#old-character-sheets\").click(e => {\n      //one of the new windows with all the stuff that went into the top drawer\n      // ebot.showModal(\"Helpful Info\", abc.viewHelpfulInfo())\n\n      let options = {\n        windowId: 'old-character-sheets', \n        content: abc.getOldCharacterSheetWindowContent(),\n        width: '1250px',\n        height: '280px'\n      }\n      abc.createWindow(options)\n      abc.handlerOldCharacterSheetWindow()\n\n\n    })\n\n    $(\"#messaging\").click(e => {\n\n      let options = {\n        windowId: 'messaging', \n        content: abc.getMessagingWindowContent(),\n        width: '450px',\n        height: '280px'\n      }\n      abc.createWindow(options)\n      abc.handlerMessagingWindow()\n\n\n    })\n\n\n\n\n  },\n\n  handlerRightDrawerContentsDM: () => {\n    abc.handlerRightDrawerContentsCommon()\n\n    $(\"#background-select\").chosen(ebot.chosenOptions).change(e => {\n      let element = $(e.currentTarget)\n      abc.changeBackground(element.val())\n      abc.socket.emit('background changed', {background: element.val()})\n    })\n\n    $('#background_select_chosen').css('width', '100%')\n\n    $(\"#toggle-cursor-visibility\").on(\"click\", e => {\n      abc.cursorsVisible = !abc.cursorsVisible\n      abc.socket.emit('cursors toggle visibility', {cursorsVisible: abc.cursorsVisible})\n    })\n\n    $(\"#token-window\").click(e => {\n      let options = {\n        windowId: 'add-tokens', \n        content: abc.getTokenWindowContent(),\n        width: '900px'\n      }\n      abc.createWindow(options)\n      abc.handlerTokenWindow()\n    })\n\n\n\n  },\n\n  handlerRightDrawerContentsPlayer: () => {\n    abc.handlerRightDrawerContentsCommon()\n\n    $(\"#show-backstory\").click(e => {\n      let detailText = abc.characterDetails.filter(detail => {\n        return detail.playerCharacterId == abc.currentPlayerCharacterId\n      })[0].backstory\n      \n      detailText = `<div style=\"white-space: pre-wrap;\">${detailText}</div>`\n\n      ebot.showModal(\"Backstory\", detailText)\n    })\n\n    $(\"#show-my-powers\").click(e => {\n      let htmlString = ``\n\n      let relevantPowerJoins = abc.joinPlayerCharacterPowers.filter(join => {\n        return join.playerCharacterId == abc.currentPlayerCharacterId\n      })\n\n      relevantPowerJoins.forEach(join => {\n        let relevantPower = abc.powers.filter(power => {\n          return power.powerId == join.powerId\n        })[0]\n\n        htmlString += `\n        <div class='power-view'>\n\n          <h4>${relevantPower.name}</h4>\n          Type: ${relevantPower.type} <br>\n          Attack Type: ${relevantPower.attackType} <br>\n          Damage: ${relevantPower.damage} <br>\n          Effect: ${relevantPower.effect} <br>\n          Description: ${relevantPower.description} <br>\n          Flavor: ${relevantPower.flavorText} <br>\n          Upgrade Effects: ${relevantPower.upgrade} <br>\n\n        </div><br><br>`\n      })\n\n      ebot.showModal(\"My Powers\", htmlString)\n    })\n\n  },\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  createWindow: options => {\n\n    options.windowId += '-window'\n\n    if(!options.hasOwnProperty('width')) {\n      options.width = '300px'\n    }\n\n    if(!options.hasOwnProperty('height')) {\n      options.height = '485px'\n    }\n\n    let htmlString = ``\n\n    // create the window html\n    htmlString += `\n    <div id='${options.windowId}' class='window' style='width:${options.width}; height:${options.height}'>\n      <div id='window-close-${options.windowId}' class='window-close-button'><i class='glyphicon glyphicon-remove'></i></div><br>\n      ${options.content}\n    </div>`\n  \n    // add the window to the page\n    $('#wrapper').append(htmlString)\n\n    // make the window draggable and resizable\n    $(`#${options.windowId}`).draggable().resizable()\n\n    // enable the close functionality\n    $(`#window-close-${options.windowId}`).click(e => {\n      $(`#${options.windowId}`).remove()\n    })\n  },\n\n  getTokenWindowContent: () => {\n    let htmlString = ``\n\n    abc.items.forEach(item => {\n      htmlString += `<button class='add-item-button' item-id='${item._id}' item-image-filename='${item.imageFilename}'><img src='images/items/${item.imageFilename}'></button>`\n    })\n\n    htmlString += `<br><br><br>`\n\n    abc.playerCharacters.forEach(pc => {\n      htmlString += `<button class='add-player-character-button' player-character-id='${pc._id}' player-character-image-filename='${pc.imageFilename}'><img src='/images/player-characters/${pc.imageFilename}'></button>`\n    })\n\n    htmlString += `<br><br><br>`\n\n    abc.creatures.forEach(creature => {\n      htmlString += `<button class='add-creature-button' creature-id='${creature._id}' creature-image-filename='${creature.imageFilename}'><img src='/images/creatures/${creature.imageFilename}'></button>`\n    })\n\n    htmlString += `<br><br><br>`\n\n    // add-custom-token\n    htmlString += `\n      blizzard: <button class='add-custom-token' image-filename='blizzard.png' token-height='150' token-width='150' opacity='.5'><img height='50' width='50' src='/images/custom/blizzard.png'></button>\n      caution: <button class='add-custom-token' image-filename='caution.png' token-height='100' token-width='100' opacity='.5'><img height='50' width='50' src='/images/custom/caution.png'></button>\n      sorrow: <button class='add-custom-token' image-filename='sorrow.png' token-height='150' token-width='150' opacity='.5'><img height='50' width='50' src='/images/custom/sorrow.png'></button>\n      heals: <button class='add-custom-token' image-filename='green3.png' token-height='150' token-width='150' opacity='.5'><img height='50' width='50' src='/images/custom/green3.png'></button>\n    `\n\n    return htmlString\n  },\n\n  handlerTokenWindow: () => {\n\n    $(\".add-item-button\").click(e => {\n      let button = $(e.currentTarget)\n      let imageFilename = button.attr(\"item-image-filename\")\n      let ranTop = ebot.getRandomInt(2, 10) * 50\n      let ranLeft = ebot.getRandomInt(2, 10) * 50\n      abc.addTokenItem(imageFilename, ranTop, ranLeft)\n\n      let emitObj = {\n        imageFilename: imageFilename,\n        ranTop: ranTop,\n        ranLeft: ranLeft\n      }\n\n      abc.socket.emit('item token added', emitObj)\n    })\n\n    $(\".add-player-character-button\").click(e => {\n      let button = $(e.currentTarget)\n      let imageFilename = button.attr(\"player-character-image-filename\")\n      let ranTop = ebot.getRandomInt(2, 10) * 50\n      let ranLeft = ebot.getRandomInt(2, 10) * 50\n      abc.addTokenPlayerCharacter(imageFilename, ranTop, ranLeft)\n\n      let emitObj = {\n        imageFilename: imageFilename,\n        ranTop: ranTop,\n        ranLeft: ranLeft\n      }\n\n      abc.socket.emit('player character token added', emitObj)\n    })\n\n    $(\".add-creature-button\").click(e => {\n      let button = $(e.currentTarget)\n      let imageFilename = button.attr(\"creature-image-filename\")\n      let id = button.attr(\"creature-id\")\n      let ranTop = ebot.getRandomInt(2, 10) * 50\n      let ranLeft = ebot.getRandomInt(2, 10) * 50\n      abc.addTokenCreature(imageFilename, ranTop, ranLeft, id)\n\n      let emitObj = {\n        imageFilename: imageFilename,\n        ranTop: ranTop,\n        ranLeft: ranLeft,\n        id: id\n      }\n\n      abc.socket.emit('creature token added', emitObj)\n    })\n\n    $(\".add-custom-token\").click(e => {\n      let button = $(e.currentTarget)\n      let imageFilename = button.attr(\"image-filename\")\n      let ranTop = ebot.getRandomInt(2, 10) * 50\n      let ranLeft = ebot.getRandomInt(2, 10) * 50\n      let height = button.attr(\"token-height\")\n      let width = button.attr(\"token-width\")\n      let opacity = button.attr(\"opacity\")\n      // abc.addCustomToken(imageFilename, ranTop, ranLeft, height, width)\n\n      let emitObj = {\n        event: 'add-custom-token',\n        imageFilename: imageFilename,\n        ranTop: ranTop,\n        ranLeft: ranLeft,\n        height: height,\n        width: width,\n        opacity: opacity\n      }\n\n      abc.toSocket(emitObj)\n    })\n\n  },\n\n  getOldCharacterSheetWindowContent: () => {\n    let htmlString = ``\n\n    htmlString += `<table id='player-stats-table' class=\"table-condensed\">`\n\n    htmlString += `<tr>\n      <th>Player Name</th>\n      <th>Character Name</th>\n      <th>Current HP</th>\n      <th>Max HP</th>\n      <th>AC</th>\n      <th>Will</th>\n      <th>Reflex</th>\n      <th>To Hit AC/Will/Reflex</th>\n      <th>Damage Mod</th>\n      <th>Speed</th>\n      <th>Initiative</th>\n      <th>Action Points</th>\n      <th>Gold</th>\n      <th>Str</th>\n      <th>Con</th>\n      <th>Int</th>\n      <th>Wis</th>\n      <th>Dex</th>\n      <th>Cha</th>\n    </tr>`\n\n    abc.playerCharacters.forEach(player => {\n      if(abc.doNotInclude.indexOf(player.playerName) === -1) {\n          htmlString += `<tr>\n          <td>${player.playerName}</td>\n          <td>${player.characterName}</td>\n          <td><input id='current-hp-input-${player.playerCharacterId}' class='current-hp-input form-control' type='number' value='${player.hp}'></td>\n          <td>${player.hp}</td>\n          <td>${player.ac}</td>\n          <td>${player.will}</td>\n          <td>${player.reflex}</td>\n          <td style=\"text-align:center;\">${player.baseToHitAc}/${player.baseToHitWill}/${player.baseToHitReflex}</td>\n          <td>${player.damageModifier}</td>\n          <td>${player.speed}</td>\n          <td>${player.initiative}</td>\n          <td>${player.actionPoints}</td>\n          <td>${player.gold}</td>\n          <td>${player.strength}</td>\n          <td>${player.constitution}</td>\n          <td>${player.intelligence}</td>\n          <td>${player.wisdom}</td>\n          <td>${player.dexterity}</td>\n          <td>${player.charisma}</td>\n\n        </tr>`\n      }\n      \n    })\n\n    htmlString += `</table>`\n\n    return htmlString\n  },\n\n  handlerOldCharacterSheetWindow: () => {\n    $(\".current-hp-input\").off(\"change\")\n\n    $(\".current-hp-input\").on(\"change\", e => {\n      let element = $(e.currentTarget)\n      let id = element.attr(\"id\")\n      let val = element.val()\n      abc.socket.emit('hp changed', {id: id, val: val})\n    })\n  },\n\n  getMessagingWindowContent: () => {\n    let players = ['all', 'dave', 'elias', 'izzy', 'josh', 'nick'] // this should be more global\n    let htmlString = ``\n\n    htmlString += `<ul id=\"tabs\" class=\"nav nav-tabs\" role=\"tablist\">`\n    let increment = 1\n    players.forEach(player => {\n      htmlString += `\n        <li role=\"presentation\" class=\"tabs\"><a id=\"tab${increment}\" href=\"#pane${increment}\" aria-controls=\"pane${increment}\" role=\"tab\" data-toggle=\"tab\">${player.capitalize()}</a></li>\n      `\n      increment++\n    })\n    htmlString += `</ul>`\n    \n    \n    htmlString += `<div class=\"tab-content\">`\n    increment = 1\n    players.forEach(player => {\n      htmlString += `\n      <div id=\"pane${increment}\" class=\"tab-pane fade active\" role=\"tabpanel\">\n        <div class='message-ul-wrapper'>\n          <ul id='messages-from-${player}'></ul>\n        </div>\n        <div id='messaging-controls-${player}' class='messaging-controls'>\n          <input id='messages-to-send-${player}' class='messages-to-send'>\n          <button id='send-message-${player}' data-from='${abc.currentPlayerName}' data-to='${player}' class='btn btn-sm messages-send-button'>Send</button>\n        </div>\n      </div>`\n\n      increment++\n    })\n    htmlString += `</div>`\n\n    return htmlString\n  },\n\n  handlerMessagingWindow: () => {\n    \n    // let listener = new window.keypress.Listener()\n\n    let game_ele = document.getElementById('#messaging-controls-all')\n    let listener = window.keypress.Listener(game_ele)\n    listener.simple_combo('return', () => {\n      $('#send-message-all').click()\n    })\n  \n    $('.messages-send-button').on('click', e => {\n      let button = $(e.currentTarget)\n      let from = button.attr('data-from')\n      let to = button.attr('data-to')\n      let message = $(`#messages-to-send-${to}`).val()\n      $(`#messages-to-send-${to}`).val('')\n      let obj = {\n        event: 'message',\n        from: from,\n        to: to,\n        message: message\n      }\n      if(!obj.message) return\n      abc.toSocket(obj)\n    })\n    \n  },\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  changeBackground: background => {\n    if(background !== \"blank\") {\n  \n      $(\"#wrapper\")\n      .velocity({opacity: 0}, {duration: 1000, complete: () => {\n        $(\"#wrapper\").css(\"background-image\", `url(images/backgrounds/${background})`).css(\"background-repeat\", \"no-repeat\") \n      }})\n      .velocity({opacity: 1}, {duration: 1000})\n\n    } else {\n      $(\"#wrapper\").css(\"background-image\", ``)\n    }\n  },\n\n  changeHp: (id, val) => {\n    $(`#${id}`).val(val)\n  },\n\n  viewAllPowers: () => {\n    let htmlString = ``\n\n    abc.powers.forEach(power => {\n      htmlString += `\n      <div>\n\n        <h4>${power.name}</h4>\n        Type: ${power.type} <br>\n        Attack Type: ${power.attackType} <br>\n        Damage: ${power.damage} <br>\n        Effect: ${power.effect} <br>\n        Description: ${power.description} <br>\n        Flavor: ${power.flavorText} <br>\n        Upgrade Effects: ${power.upgrade} <br>\n\n      </div><br><br>`\n    })\n\n    return htmlString\n  },\n\n\n\n  viewAllPowersImproved: () => {\n    let htmlString = ``\n\n    htmlString += `<br><br>`\n\n    htmlString += `\n      <label class=\"radio-inline\">\n        <input type=\"radio\" name=\"power-filter-radio\" id=\"name\" value=\"name\"> Title\n      </label> \n      <label class=\"radio-inline\">\n        <input type=\"radio\" name=\"power-filter-radio\" id=\"type\" value=\"type\"> Type\n      </label>\n      <label class=\"radio-inline\">\n        <input type=\"radio\" name=\"power-filter-radio\" id=\"attack-type\" value=\"attackType\"> Attack Type\n      </label>\n\n      <br>\n\n      <input id='filter-text'>\n      <button id='filter' class='btn btn-sm'>Filter</button>\n\n      <br>\n\n      <select id='character-filter' class='form-control'>\n        <option value=''>All</option>\n        <option value='1'>Laurana Lightbrand</option>\n        <option value='2'>Andros Vexstine</option>\n        <option value='3'>Skjor the Scarred</option>\n        <option value='4'>Greg Symbol</option>\n        <option value='5'>Ares Icharyd</option>\n        <option value='8'>WildKat</option>\n        <option value='9'>Scree Lo Tal</option>\n      </select>\n\n      <label>Current Powers Shown:\n        <div id='count-powers'>${abc.powers.length}</div>\n      </label>\n\n      <br><br>\n\n      <div id='powers'>\n    `\n\n    let uniqueTypes = ebot.getUniqueFields(abc.powers, 'type')\n\n    abc.powers.forEach(power => {\n      htmlString += `\n      <div class='power-view'>\n\n        <b>${power.name}</b> <br>\n        Type: ${power.type} <br>\n        Attack Type: ${power.attackType} <br>\n        Damage: ${power.damage} <br>\n        Effect: ${power.effect} <br>\n        Description: ${power.description} <br>\n        Flavor: ${power.flavorText} <br>\n        Upgrade Effects: ${power.upgrade} <br>\n\n      </div>`\n    })\n\n    htmlString += `</div>`\n\n    return htmlString\n  },\n\n  handlerAllPowersImproved: () => {\n    $(\"#filter\").click(e => {\n      let htmlString = ``\n      let filterText = $(\"#filter-text\").val()\n      let countPowers = 0\n\n      let propOnWhichToFilter = $('input:radio[name=power-filter-radio]:checked').val()\n      console.log(propOnWhichToFilter)\n      \n      if(filterText === '' || filterText === null) {\n        htmlString += abc.viewAllPowersJustPowers()\n        countPowers = abc.powers.length\n      } else {\n        abc.powers.forEach(power => {\n          // if(power.type.indexOf(filterText) > -1) {\n            console.log(power)\n            console.log(power[propOnWhichToFilter])\n          if(power[propOnWhichToFilter].indexOf(filterText) > -1) {\n            countPowers++\n            htmlString += `\n            <div class='power-view'>\n\n              <b>${power.name}</b> <br>\n              Type: ${power.type} <br>\n              Attack Type: ${power.attackType} <br>\n              Damage: ${power.damage} <br>\n              Effect: ${power.effect} <br>\n              Description: ${power.description} <br>\n              Flavor: ${power.flavorText} <br>\n              Upgrade Effects: ${power.upgrade} <br>\n\n            </div>`\n          }\n          \n        })\n      }\n\n      $(\"#powers\").html(htmlString)\n      $('#count-powers').html(countPowers)\n\n    })\n\n\n    $(\"#character-filter\").change(e => {\n      let element = $(e.currentTarget)\n      let playerCharacterId = element.val()\n      let countPowers = 0\n      let htmlString = ``\n\n      if(playerCharacterId === '') {\n        htmlString += abc.viewAllPowersJustPowers()\n        countPowers = abc.powers.length\n      } else {\n        let relevantPowerJoins = abc.joinPlayerCharacterPowers.filter(join => {\n          return join.playerCharacterId == playerCharacterId\n        })\n\n        relevantPowerJoins.forEach(join => {\n          countPowers++\n          let relevantPower = abc.powers.filter(power => {\n            return power.powerId == join.powerId\n          })[0]\n\n          htmlString += `\n            <div class='power-view'>\n\n              <b>${relevantPower.name}</b> <br>\n              Type: ${relevantPower.type} <br>\n              Attack Type: ${relevantPower.attackType} <br>\n              Damage: ${relevantPower.damage} <br>\n              Effect: ${relevantPower.effect} <br>\n              Description: ${relevantPower.description} <br>\n              Flavor: ${relevantPower.flavorText} <br>\n              Upgrade Effects: ${relevantPower.upgrade} <br>\n\n            </div>`\n        })\n      }\n\n\n\n      $(\"#powers\").html(htmlString)\n      $('#count-powers').html(countPowers)\n\n    })\n  },\n\n  viewAllPowersJustPowers: () => {\n    let htmlString = ``\n\n    abc.powers.forEach(power => {\n      htmlString += `\n      <div class='power-view'>\n\n        <b>${power.name}</b> <br>\n        Type: ${power.type} <br>\n        Attack Type: ${power.attackType} <br>\n        Damage: ${power.damage} <br>\n        Effect: ${power.effect} <br>\n        Description: ${power.description} <br>\n        Flavor: ${power.flavorText} <br>\n        Upgrade Effects: ${power.upgrade} <br>\n\n      </div>`\n    })\n\n    return htmlString\n  },\n\n\n\n  viewHelpfulInfo: () => {\n    let htmlString = ``\n\n    htmlString += `\n    <img src='images/miscellaneous/ability-modifiers.png'>\n    <br><br>\n    <img src='images/miscellaneous/skill-table.jpg'>\n    <br><br>\n\n    <br> Level 2 - 2 Defense points, +1 Base damage\n    <br> Level 3 - Power point + 2 x To hit +1\n    <br> Level 4 - Base damage +2\n    <br> Level 5 - +3 Ability Score, Power point\n    <br> Level 6 - 2 Defense points, +1 Base damage\n    <br> Level 7 - Power point\n    <br> Level 8 - 2 Defense points\n    <br> Level 9 - 2 x To hit +1\n    <br> Level 10 - +1 Action point, 1 Power point, +3 Ability Score, Choose: Initiative +4, Speed +1, +3 Base damage    \n    `\n\n    return htmlString\n  },\n\n\n\n\n\n\n \n  addTokenItem: (imageFilename, ranTop, ranLeft) => {\n\n    //I'm a bad person. Fix this\n    let effects = ['poison.jpg', 'ice.jpg', 'fire.jpg', 'immobile.gif', 'prone.gif']\n    let id = `dynamically-added-div-${abc.currentDynamicDivId}`\n    let htmlString = ``\n    if(effects.indexOf(imageFilename) > -1) {\n      htmlString = `<div id='${id}' style='position:absolute; top:${ranTop}px; left:${ranLeft}px; width: 50px; height: 50px; opacity: 0.4;'><img src='images/items/${imageFilename}'></div>`\n    } else {\n      htmlString = `<div id='${id}' style='position:absolute; top:${ranTop}px; left:${ranLeft}px; width: 50px; height: 50px;'><img src='images/items/${imageFilename}'></div>`\n    }\n    $(\"#wrapper\").append(htmlString)\n    $(`#${id}`).draggable(abc.draggableOptionsToken)\n    abc.currentDynamicDivId++\n  },\n\n  addTokenPlayerCharacter: (imageFilename, ranTop, ranLeft) => {\n    let id = `dynamically-added-div-${abc.currentDynamicDivId}`\n    let htmlString = `<div id='${id}' style='position:absolute; top:${ranTop}px; left:${ranLeft}px; width: 50px; height: 50px;'><img src='images/player-characters/${imageFilename}'></div>`\n    $(\"#wrapper\").append(htmlString)\n    $(`#${id}`).draggable(abc.draggableOptionsToken)\n    abc.currentDynamicDivId++\n  },\n\n  addTokenCreature: (imageFilename, ranTop, ranLeft, creatureId) => {\n    let id = `dynamically-added-div-${abc.currentDynamicDivId}`\n    let htmlString = `<div id='${id}' token-id='${abc.currentDynamicDivId}' style='position:absolute; top:${ranTop}px; left:${ranLeft}px; width: 50px; height: 50px;'><img src='images/creatures/${imageFilename}'></div>`\n    $(\"#wrapper\").append(htmlString)\n    $(`#${id}`).draggable(abc.draggableOptionsToken)\n\n    if(!abc.creatureTableCreated && abc.userIsDM) {\n      abc.createCreatureTable()\n    }\n\n    // testing to make sure I had unique local copies of the creatures\n    // $(`#${id}`).on(\"click\", e => {\n    //   let element = $(e.currentTarget)\n    //   let tokenId = +element.attr('token-id')\n    //   let creature = abc.activeCreatures.filter(aCreature => {\n    //     return aCreature.tokenId === tokenId\n    //   })[0]\n\n    //   console.log(creature.hp)\n\n    // })\n\n\n    let newCopy = abc.getCreature(creatureId)\n\n    newCopy.tokenId = abc.currentDynamicDivId\n\n    abc.activeCreatures.push(newCopy)\n\n    if(abc.userIsDM) {\n      abc.addCreatureToCreatureTable(newCopy)\n    }\n\n    abc.currentDynamicDivId++\n  },\n\n  addCustomToken: (imageFilename, ranTop, ranLeft, height, width, opacity) => {\n    let id = `dynamically-added-div-${abc.currentDynamicDivId}`\n    let htmlString = `<div id='${id}' style='position:absolute; top:${ranTop}px; left:${ranLeft}px; width: ${width}px; height: ${height}px; opacity: ${opacity};'><img src='images/custom/${imageFilename}'></div>`\n    $(\"#wrapper\").append(htmlString)\n    $(`#${id}`).draggable(abc.draggableOptionsToken)\n    abc.currentDynamicDivId++\n  },\n\n\n  makeRightDrawer: () => {\n    abc.drawerify({\n      fromThe: \"right\",\n      selector: \"#right-drawer\",\n      contents: \"#right-drawer-contents\",\n      opacity: 0.9\n    })\n  },\n  \n\n\n\n\n  createTurnCounter: () => {\n    $('#wrapper').append(abc.createTurnCounterHtml())\n    abc.handlerTurnCounter()\n  },\n\n  createTurnCounterHtml: () => {\n    let htmlString = ``\n\n    if(abc.userIsDM) {\n      htmlString += `\n      <div id='turn-counter-container' class=''>\n\n        <label>Current Turn:</label>\n        <span id='tc-current-turn'>0</span>\n        <button id='tc-decrement-turn' class='btn btn-sm'><i class='glyphicon glyphicon-minus'></i></button>\n        <button id='tc-increment-turn' class='btn btn-sm'><i class='glyphicon glyphicon-plus'></i></button>\n        <button id='tc-add-row' class='btn btn-sm'>Add Row</button>\n        <br>\n\n        <table id='turn-counter-table' class='table-condensed'>\n          <tr id='tc-header-row'>\n            <th>Name</th>\n            <th>Initiative</th>\n            <th>Count</th>\n            <th></th>\n            <th></th>\n          </tr>\n          \n        </table>\n      </div>`\n    } else {\n      htmlString += `\n      <div id='turn-counter-container' class=''>\n\n        <label>Current Turn:</label>\n        <span id='tc-current-turn'>0</span>\n        <br>\n\n        <table id='turn-counter-table' class='table-condensed'>\n          <tr id='tc-header-row'>\n            <th>Name</th>\n            <th>Initiative</th>\n            <th>Count</th>\n            <th></th>\n            <th></th>\n          </tr>\n          \n        </table>\n      </div>`\n    }\n    \n\n    return htmlString\n  },\n\n  addRowToTurnCounter: randId => {\n    $('#turn-counter-table').append(abc.createTurnCounterRowHtml(randId))\n    \n    if(abc.userIsDM) {\n      $('.tc-edit-row').off('click')\n      $('.tc-remove-row').off('click')\n\n      $('.tc-edit-row').on('click', e => {\n        let element = $(e.currentTarget)\n        let randId = element.attr('rand-id')\n        let currentlyEditIcon = $(`button[rand-id='${randId}'][class~=tc-edit-row]`).attr('currently-edit-icon')\n\n        if(currentlyEditIcon === 'true') { //everything is normal. Change everything to inputs\n          let currentName = $(`.td-name[id=tc-name-${randId}]`).text()\n          let currentInitiative = $(`.td-initiative[id=tc-initiative-${randId}]`).text()\n          let currentCount = $(`.td-count[id=tc-count-${randId}]`).text()\n\n          $(`.td-name[id=tc-name-${randId}]`).html(`<input id='temp-input-name' class='temp-input' value='${currentName}'>`)\n          $(`.td-initiative[id=tc-initiative-${randId}]`).html(`<input id='temp-input-initiative' class='temp-input' value='${currentInitiative}'>`)\n          $(`.td-count[id=tc-count-${randId}]`).html(`<input id='temp-input-count' class='temp-input' value='${currentCount}'>`)\n\n          $(`button[rand-id='${randId}'][class~=tc-edit-row]`).html(`<i class='glyphicon glyphicon-floppy-disk'></i>`)\n          $(`button[rand-id='${randId}'][class~=tc-edit-row]`).attr('currently-edit-icon', 'false')\n\n        } else { //info was just updated, retrieve it and put things back to normal\n\n          let updatedName = $(`#temp-input-name`).val()\n          let updatedInitiative = $(`#temp-input-initiative`).val()\n          let updatedCount = $(`#temp-input-count`).val()\n\n          abc.toSocket({\n            event: 'update-turn-counter-row-values',\n            randId: randId,\n            updatedName: updatedName,\n            updatedInitiative: updatedInitiative,\n            updatedCount: updatedCount\n          })\n\n          $(`button[rand-id='${randId}'][class~=tc-edit-row]`).html(`<i class='glyphicon glyphicon-edit'></i>`)\n          $(`button[rand-id='${randId}'][class~=tc-edit-row]`).attr('currently-edit-icon', 'true')\n        }\n      })\n\n      $('.tc-remove-row').on('click', e => {\n        let element = $(e.currentTarget)\n        let randId = element.attr('rand-id')\n        abc.toSocket({event: 'remove-turn-counter-row', randId: randId})\n      })\n    }\n\n    \n  },\n\n  handlerTurnCounter: () => {\n\n    $('#turn-counter-container').draggable().resizable()\n\n    $('#tc-add-row').click(e => {\n      let randId = ebot.getRandomInt(100000, 999999)\n      abc.toSocket({event: 'add-row-to-turn-counter', randId: randId})\n    })\n\n    $(\"#tc-increment-turn\").click(e => {\n      abc.toSocket({event: 'increment-turn'})\n    })\n\n    $(\"#tc-decrement-turn\").click(e => {\n      abc.toSocket({event: 'decrement-turn'})\n    })\n\n  },\n\n  createTurnCounterRowHtml: randId => {\n    let htmlString = ``\n\n    if(abc.userIsDM) {\n      htmlString += `\n      <tr id='tc-${randId}'>\n        <td id='tc-name-${randId}' class='td-name'>asdf</td>\n        <td id='tc-initiative-${randId}' class='td-initiative'></td>\n        <td id='tc-count-${randId}' class='td-count'>1</td>\n        <td><button class='btn btn-sm tc-edit-row' rand-id='${randId}' currently-edit-icon='true'><i class='glyphicon glyphicon-edit'></i></button></td>\n        <td><button class='btn btn-sm tc-remove-row' rand-id='${randId}'><i class='glyphicon glyphicon-minus'></i></button></td>\n      </tr>`\n    } else {\n      htmlString += `\n      <tr id='tc-${randId}'>\n        <td id='tc-name-${randId}' class='td-name'>asdf</td>\n        <td id='tc-initiative-${randId}' class='td-initiative'></td>\n        <td id='tc-count-${randId}' class='td-count'>1</td>\n        <td></td>\n        <td></td>\n      </tr>`\n    }\n\n    return htmlString\n  },\n\n  \n\n\n\n\n  createCreatureTable: () => {\n    $('#wrapper').append(abc.createCreatureTableHtml())\n    abc.handlerCreatureTable()\n    abc.creatureTableCreated = true\n  },\n\n  createCreatureTableHtml: () => {\n    let htmlString = ``\n\n    htmlString += `\n    <div id='creature-table-container'>\n      <button id='remove-creature-table' class='btn btn-md'><i class='glyphicon glyphicon-minus'></i></button>\n\n      <table id='creature-table' class='table-condensed'>\n        <tr id='ct-header-row'>\n          <th>Name</th>\n          <th>HP</th>\n          <th>Status</th>\n          <th></th>\n        </tr>\n      </table>\n\n    </div>`\n\n    return htmlString\n  },\n\n  handlerCreatureTable: () => {\n    $('#creature-table-container').draggable().resizable()\n\n    $(\"#remove-creature-table\").click(e => {\n      $('#creature-table-container').remove()\n    })\n  },\n\n  addCreatureToCreatureTable: creature => {\n    let htmlString = ``\n\n    htmlString += `\n    <tr id='' creature-id='${creature._id}' token-id='${creature.tokenId}'>\n      <td id='creature-table-name-${creature.tokenId}' class='creature-table-name'>${creature.name}</td>\n      <td id=''><input class='form-control creature-table-hp-input' creature-id='${creature._id}' type='number' value='${creature.hp}'></td>\n      <td id=''><input class='form-control creature-table-status'></td>\n      <td><button class='btn btn-sm ct-remove' token-id='${creature.tokenId}'><i class='glyphicon glyphicon-minus'></i></button></td>\n    </tr>`\n\n    $('#creature-table').append(htmlString)\n\n    $(\".creature-table-hp-input\").off(\"change\").on(\"change\", e => {\n      let element = $(e.currentTarget)\n      let creatureId = element.attr(\"creature-id\")\n      let val = element.val()\n\n      let creature = abc.activeCreatures.filter(aCreature => {\n        return aCreature._id === creatureId\n      })[0]\n\n      creature.hp = val\n    })\n\n    // $(\"#myElement\").unbind('mouseenter mouseleave');\n    // $('#myElement').off('hover');\n\n    $(\"#creature-table tr\").hover(e => {\n\n      $(\"#creature-table tr\").on({\n        mouseenter: e => {\n          addBorderToToken(e, true)\n        },\n        mouseleave: e => {\n          addBorderToToken(e, false)\n        }\n      })\n\n      function addBorderToToken(e, mouseEnter) {\n        let tokenId = $(e.currentTarget).attr('token-id')\n        if(tokenId !== undefined) {\n          let borderString = mouseEnter ? 'solid gold 3px' : ''\n          $(`#dynamically-added-div-${tokenId}`).css('border', borderString)\n        }\n      }\n\n      let tooltipString = ``\n      let propsToIgnore = ['_id', 'imageFilename', '__v', 'tokenId', 'creatureId', 'level', 'xpValue', 'goldValue', 'race', 'name']\n\n      for(let prop in creature) {\n        if(propsToIgnore.indexOf(prop) === -1) {\n          tooltipString += `${prop}: ${creature[prop]}<br>`\n        }\n      }\n\n      $(`#creature-table-name-${creature.tokenId}`).tooltip({\n        placement: 'left',\n        title: tooltipString,\n        html: true\n      })\n    })\n\n    $(\".ct-remove\").off('click').on('click', (e => {\n      let element = $(e.currentTarget)\n      let tokenId = element.attr('token-id')\n      abc.toSocket({\n        event: 'creature-table-remove-row',\n        tokenId: tokenId\n      })\n      $(`tr[token-id=${tokenId}]`).remove()\n    }))\n\n\n\n  },\n\n\n\n\n\n  /*\n    Utilities\n  */\n  playSound: sound => {\n    let soundUnique = new Howl({\n      urls: [`/sounds/${sound}.wav`]\n    }).play()\n  },\n\n  draggableOptions: {\n    drag: (event, ui) => {\n      let emitObj = {\n        id: ui.helper[0].id,\n        x: $(ui.helper[0]).css(\"left\"),\n        y: $(ui.helper[0]).css(\"top\")\n      }\n\n      abc.socket.emit('element dragged', emitObj)\n    }\n  },\n\n  draggableOptionsToken: {\n    drag: (event, ui) => {\n      let emitObj = {\n        id: ui.helper[0].id,\n        x: $(ui.helper[0]).css(\"left\"),\n        y: $(ui.helper[0]).css(\"top\")\n      }\n\n      abc.socket.emit('element dragged', emitObj)\n    },\n    grid:[50, 50]\n  },\n\n  //not currently being used\n  resizableOptions: {\n    resize: (event, ui) => {\n      let emitObj = {\n        id: ui.element[0].id,\n        height: ui.size.height,\n        width: ui.size.width\n      }\n\n      abc.socket.emit('element resized', emitObj)\n    }\n  },\n\n  getCreature: creatureId => {\n    let creature = abc.creatures.filter(creature => {\n      return creature._id === creatureId\n    })[0]\n\n    return abc.deepCopy(creature)\n  },\n\n  toSocket: obj => {\n    abc.socket.emit('core', obj)\n  },\n\n  deepCopy: (obj) => {\n    return JSON.parse(JSON.stringify(obj))\n  },\n\n  drawerify: options => {\n    let drawer = $(options.selector)\n    let drawerContents = $(options.contents)\n    let drawerVisible = false\n    let drawerHeight = drawer.height()\n    let drawerWidth = drawer.width()\n\n    drawer\n      .after(`<div id='drawer-handle-right' class='drawer-handle' style='top: ${drawerHeight-(drawerHeight*0.1)}px;right: 0px'><i class='glyphicon glyphicon-chevron-left'></i></div>`)\n      .css(\"opacity\", 0)\n      .css(\"width\", \"0px\")\n\n    drawerContents\n      .css(\"opacity\", 0).css(\"display\", \"none\")\n\n    let drawerHandleContainer = $(\"#drawer-handle-right\")\n    let drawerHandle = $(\"#drawer-handle-right i\")\n\n    $(\"#drawer-handle-right i\").click(function() {\n      if(!drawerVisible) {\n        drawer.velocity({\n          width: `${drawerWidth}px`,\n          opacity: options.opacity\n        },\n        {\n          complete: function(elements) { \n            drawerContents.css(\"display\", \"block\")\n            drawerContents.velocity({opacity: options.opacity})\n          }\n        })\n        drawerHandle.removeClass(\"glyphicon-chevron-left\").addClass(\"glyphicon-chevron-right\").velocity({\n          right: `${drawerWidth}px`,\n        })\n        drawerVisible = true\n      } else {\n        drawerContents.css(\"opacity\", 0).css(\"display\", \"none\")\n        drawer.velocity({\n          width: `0px`,\n          opacity: 0\n        })\n        drawerHandle.removeClass(\"glyphicon-chevron-right\").addClass(\"glyphicon-chevron-left\").velocity({\n          right: `0px`,\n        })\n        drawerVisible = false\n      }\n    })\n  },\n\n  dragDelay: 1,\n  \n  dragCounter: 0,\n\n  socket: {},\n\n  currentDynamicDivId: 1,\n\n  // apiurl: \"http://localhost:8082\",\n  apiurl: \"http://192.241.203.33:8082\",\n\n  userIsPlayer: false,\n\n  userIsDM: false,\n\n  currentPlayerCharacterId: 0,\n  \n  currentPlayerName: '',\n\n  items: [],\n\n  powers: [],\n\n  creatures: [],\n\n  playerCharacters: [],\n\n  nonPlayerCharacters: [],\n\n  joinPlayerCharacterItems: [],\n\n  joinPlayerCharacterPowers: [],\n\n  characterDetails: [],\n\n  activeCreatures: [],\n\n  cursorDelay: 0,\n\n  cursorsVisible: true,\n\n  creatureTableCreated: false,\n\n  doNotInclude: ['npc', 'Ryland']\n\n}\n\n"]}